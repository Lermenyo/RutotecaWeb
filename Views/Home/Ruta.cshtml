@model RutotecaWeb.Models.RutaDTO

<h1>
    @Html.DisplayFor(model => model.CodigoTipo)  @Html.DisplayFor(model => model.CodigoLugar)
    @if (!String.IsNullOrEmpty(Model.Version))
    {
        @String.Concat(Model.Numero, '.', Model.Version);
    }
    else
    {
        @Html.DisplayFor(model => model.Numero)
    }
    @if (!String.IsNullOrEmpty(Model.Etapa))
    {
        @if (!String.IsNullOrEmpty(Model.SubVersion))
        {
            @String.Concat(" Etapa: ", Model.Etapa, '.', Model.SubVersion);
        }
        else
        {
            @String.Concat(" Etapa: ", Model.Etapa);
        }
    }
</h1>
<h2>
    @Html.DisplayFor(model => model.Nombre)
</h2>
<ul>
    @if (Model.Longitud.HasValue)
    {
        <li>
            <b>Longitud: </b> @Html.DisplayFor(model => model.Longitud) km
        </li>
    }
    @if (Model.IBP.HasValue)
    {
        <li>
            <b>IBP: </b> @Html.DisplayFor(model => model.IBP)
        </li>
    }
    @if (Model.Ascenso.HasValue)
    {
        <li>
            <b>Ascenso Acumulado: </b> @Html.DisplayFor(model => model.Ascenso) metros
        </li>
    }
    @if (Model.Descenso.HasValue)
    {
        <li>
            <b>Descenso Acumulado: </b> @Html.DisplayFor(model => model.Descenso) metros
        </li>
    }
    @if (!String.IsNullOrEmpty(Model.Dificultad))
    {
        <li>
            <b>Dificultad: </b> @Html.DisplayFor(model => model.Dificultad)
        </li>
    }

    @if (!String.IsNullOrEmpty(Model.Duracion))
    {
        <li>
            <b>Duración: </b> @Html.DisplayFor(model => model.Duracion)
        </li>
    }

    @if (Model.Circular.HasValue)
    {
        <li>
            @if (Model.Circular.Value)
            {
                <b>Ruta Circular</b>
            }
            else
            {
                <b>Ruta Lineal</b>
            }
        </li>
    }
</ul>

@await Html.PartialAsync("_PerfilDeRuta", @Model)

<br />
<div id="dvCercanosPostBind">
    <div class="loaderCenter">
        <span class="loadingText">Buscando cercanos....</span>
    </div>
</div>
<br />
<div id="dvRelacionadosPostBind">
    <div class="loaderCenter">
        <span class="loadingText">Buscando relacionados....</span>
    </div>
</div>

<script src="~/lib/jquery/dist/jquery.min.js"></script>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin="" />
<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin=""></script>
<script type="text/javascript">
    function LoadCercanos()
    {
        $.ajax
            ({
                url: "/Home/GetLugaresCercanos",
                contentType: "application/html; charset=utf-8",
                data: {id:@Model.IdElemento},
            type: "GET",
            //cache: !0,
            datatype: "html",
            success: function(t)
            {
                $("#dvCercanosPostBind").html(t)
            },
            error: function()
            {
                $("#dvCercanosPostBind").html("Datos no encontrados")
            }
        })
    }
    function LoadRelacionados()
    {
        $.ajax
            ({
                url: "/Home/GetRelacionados",
                contentType: "application/html; charset=utf-8",
                data: {id:@Model.IdElemento},
            type: "GET",
            //cache: !0,
            datatype: "html",
            success: function(t)
            {
                $("#dvRelacionadosPostBind").html(t)
            },
            error: function()
            {
                $("#dvRelacionadosPostBind").html("Datos no encontrados")
            }
        })
    }

    //function CreateMap() {
	   // var mymap = L.map('mapid').setView([51.505, -0.09], 13);

	   // L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
		  //  maxZoom: 18,
		  //  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, ' +
			 //   'Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
		  //  id: 'mapbox/streets-v11',
		  //  tileSize: 512,
		  //  zoomOffset: -1
	   // }).addTo(mymap);

	   // function onMapClick(e) {
		  //  popup
			 //   .setLatLng(e.latlng)
			 //   .setContent("You clicked the map at " + e.latlng.toString())
			 //   .openOn(mymap);
	   // }

	   // mymap.on('click', onMapClick);
    //}

    $(document).ready(function()
    {
        LoadPerfil();
        LoadCercanos();
        LoadRelacionados();
        //CreateMap();
    });
</script>

